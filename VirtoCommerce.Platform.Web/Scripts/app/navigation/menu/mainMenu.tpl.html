<nav class="nav-bar">
    <div class="bar">
        <a class="menu-link" ng-click="toggleSize()">
            <i  class="menu-ico fa fa-bars"></i>
        </a>
        <ul class="menu items">
            <li class="menu-item" ng-class="{'__selected': currentMenuItem === menuItem && showSubMenu, '__animated': menuItem.incremented}" ng-repeat="menuItem in staticMenuItems" ng-click="selectMenuItem(menuItem)">
                <a class="menu-link" ng-if="!menuItem.template" href="" va-permission="{{menuItem.permission}}">
                    <i class="menu-ico" ng-class="menuItem.icon"></i>
                    <span class="name">{{menuItem.title | translate}}</span>
                </a>
                <ng-include src='menuItem.template'> </ng-include>
            </li>
        </ul>
        <div class="menu items favorites">
            <div class="outer-wrapper">
                <div class="inner-wrapper">
                    <ul class="content" ng-model="dynamicMenuItems" ui-sortable="sortableOptions">
                        <li class="menu-item" ng-class="{'__selected': currentMenuItem === menuItem && showSubMenu, '__animated': menuItem.incremented, 'list': menuItem.dynamic === 'list'}" ng-repeat="menuItem in dynamicMenuItems" ng-click="selectMenuItem(menuItem)">
                            <a class="menu-link" ng-if="!menuItem.template" href="" va-permission="{{menuItem.permission}}">
                                <i class="drag-and-drop fa fa-ellipsis-v"></i><i class="menu-ico" ng-class="menuItem.icon"></i>
                                <span class="name">{{menuItem.title | translate}}</span>
                            </a>
                            <ng-include src='menuItem.template'> </ng-include>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="__logo" style="bottom:40px;">
            <a href="" ng-click="showLicense()" ng-if="!license">{{'platform.templates.licensing.license-absent' | translate}}</a>
            <a href="" ng-click="showLicense()" ng-if="license" ng-style="!license.hasExpired ? {color: '#54a954'} : {}">{{'platform.templates.licensing.license-present' | translate: license}}</a>
        </div>
        <div class="__logo">
            <span class="logo-version">{{platformVersion}}</span>
        </div>
    </div>
    <div class="dropdown" ng-class="{'__opened': showSubMenu}">
        <a class="dropdown-close" ng-click="showSubMenu = false">×</a>
        <div class="dropdown-head" ng-if="!currentMenuItem.headerTemplate">
            <div class="form-group">
                <div class="form-hint">{{'platform.menu.toggle-favorites' | translate }}</div>
                <div class="form-input __search">
                    <input placeholder="{{'platform.placeholders.search-keyword' | translate }}" ng-model="search.searchText" ng-change="searchMenuItem(currentMenuItem.children)">
                    <button class="btn __other">
                        <i class="btn-ico fa fa-remove" title="Clear" ng-click="search.searchText=''"></i>
                    </button>
                </div>
            </div>
        </div>
        <ng-include src='currentMenuItem.headerTemplate'> </ng-include>
        <div class="dropdown-content">
            <ul class="list" ng-if="search.searchText == ''" va-favorites>
                <li class="list-item" ng-repeat="menuItem in currentMenuItem.children" ng-include="'menuItemTemplate.html'" va-permission="{{menuItem.permission}}">
                </li>
            </ul>
            <ul class="list" ng-if="search.searchText != ''" va-favorites>
                <li class="list-item" ng-repeat="menuItem in search.searchMenuItems" ng-include="'searchMenuItemTemplate.html'" va-permission="{{menuItem.permission}}">
                </li>
            </ul>
            <script type="text/ng-template" id="menuItemTemplate.html">
                <div class="list-fav" ng-if="menuItem.children.length == 0" ng-click="toggleFavorite(menuItem)">
                    <i class="list-ico {{menuItem.favorite ? 'fa fa-star' : 'fa fa-star-o'}}"></i>
                </div>
                <div class="list-group {{menuItem.icon == 'fa fa-user' ? '__customers' : ''}}" ng-if="!menuItem.template && menuItem.children.length > 0">
                    {{menuItem.title | translate}}
                </div>
                <a class="list-link {{menuItem.icon == 'fa fa-user' ? '__customers' : ''}}" ng-if="!menuItem.template && menuItem.children.length == 0" href="" ng-click="selectMenuItem(menuItem)">
                    <i class="list-ico" ng-class="menuItem.icon">
                        <i ng-if="menuItem.icon == 'fa fa-user'"></i>
                    </i>
                    {{menuItem.title | translate}}
                </a>
                <ng-include src='menuItem.template'> </ng-include>
                <ul class="list" ng-if="menuItem.children">
                    <li class="list-item" ng-repeat="menuItem in menuItem.children" va-permission="{{menuItem.permission}}" ng-include="'menuItemTemplate.html'">
                    </li>
                </ul>
            </script>
            <script type="text/ng-template" id="searchMenuItemTemplate.html">
                <div class="list-fav" ng-click="toggleFavorite(menuItem)">
                    <i class="list-ico {{menuItem.favorite ? 'fa fa-star' : 'fa fa-star-o'}}"></i>
                </div>
                <a class="list-link {{menuItem.icon == 'fa fa-user' ? '__customers' : ''}}" ng-if="!menuItem.template" href="" ng-click="selectMenuItem(menuItem)">
                    <i class="list-ico" ng-class="menuItem.icon">
                        <i ng-if="menuItem.icon == 'fa fa-user'"></i>
                    </i>
                    {{menuItem.title | translate}}
                </a>
                <ng-include src='menuItem.template'> </ng-include>
            </script>
        </div>
    </div>
</nav>
